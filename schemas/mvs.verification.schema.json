{
  "$id": "urn:zkpip:mvs.verification.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ZKPIP MVS — Verification Record",
  "allOf": [{ "$ref": "mvs.core.schema.json" }],
  "type": "object",
  "required": [
    "schemaVersion", "recordType", "id", "createdAt", "updatedAt",
    "proofSystem", "curve", "commitmentScheme", "hashFunctions",
    "publicInputsSchema", "verifier", "result"
  ],
  "properties": {
    "recordType": { "const": "verification" },
    "proofSystem": { "type": "string", "description": "e.g., Groth16, Plonk, Halo2, STARK…" },
    "curve": { "type": "string", "description": "e.g., bn254, bls12-381, N/A for STARKs" },
    "commitmentScheme": { "type": "string", "description": "e.g., KZG, IPA, FRI, N/A" },
    "hashFunctions": {
      "type": "array",
      "items": { "type": "string" },
      "minItems": 1
    },
    "publicInputsSchema": { "type": "string" },
    "circuitCommitment": { "type": ["string", "null"] },
    "proverBackend": { "type": ["string", "null"] },
    "verifier": {
      "type": "object",
      "required": ["type"],
      "properties": {
        "type": { "type": "string", "enum": ["evm", "offchain", "hybrid"] },
        "evm": {
          "type": "object",
          "properties": {
            "contractAddress": { "type": "string" },
            "chainId": { "type": "integer" }
          },
          "required": [],
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "result": {
      "type": "object",
      "required": ["verified"],
      "properties": {
        "verified": { "type": "boolean" },
        "gasUsed": { "type": ["integer", "null"], "minimum": 0 },
        "errorCode": { "type": ["string", "null"] },
        "errorMsgShort": { "type": ["string", "null"] }
      },
      "additionalProperties": true
    },
    "ext": { "type": "object", "description": "Technology-specific extensions (snarkjs, halo2, stark, barretenberg…)" }
  },
  "additionalProperties": true
}
